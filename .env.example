# ===========================================
# MyFinance - Configuration
# ===========================================
# Copier ce fichier en .env et remplir les valeurs

# --- Application ---
APP_ENV=development
APP_DEBUG=true
APP_SECRET_KEY=change-me-to-a-random-secret-key

# --- Database ---
DATABASE_URL=postgresql+asyncpg://myfinance:myfinance@localhost:5432/myfinance
POSTGRES_USER=myfinance
POSTGRES_PASSWORD=myfinance
POSTGRES_DB=myfinance

# --- Redis ---
REDIS_URL=redis://localhost:6379/0

# --- JWT Authentication ---
JWT_SECRET_KEY=change-me-to-another-random-secret-key
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ===========================================
# AI Chat Assistant
# ===========================================
# Choix du provider pour le chat IA (analyse financière, dataviz).
# Valeurs possibles : "ollama", "openai", "anthropic", "gemini"
AI_CHAT_PROVIDER=ollama

# Langue des réponses de l'assistant ("fr", "en", ...)
AI_CHAT_SYSTEM_LANGUAGE=fr

# Nombre max de transactions incluses dans le contexte de chaque requête
AI_CHAT_MAX_CONTEXT_TRANSACTIONS=50

# -------------------------------------------
# Provider : Ollama (local, gratuit)
# -------------------------------------------
# Aucune clé API requise — nécessite Ollama installé localement.
# Installation : https://ollama.com  puis  ollama pull mistral
LLM_BASE_URL=http://localhost:11434
LLM_MODEL=mistral
LLM_TIMEOUT=60

# -------------------------------------------
# Provider : OpenAI
# -------------------------------------------
# Modèles recommandés : gpt-4o (meilleur), gpt-4o-mini (économique)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o

# -------------------------------------------
# Provider : Anthropic (Claude)
# -------------------------------------------
# Modèles recommandés : claude-sonnet-4-20250514 (rapport qualité/prix),
#   claude-opus-4-20250514 (meilleur), claude-haiku-4-20250514 (économique)
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-sonnet-4-20250514

# -------------------------------------------
# Provider : Google Gemini
# -------------------------------------------
# Modèles recommandés : gemini-2.0-flash (rapide), gemini-2.5-pro (meilleur)
GEMINI_API_KEY=
GEMINI_MODEL=gemini-2.0-flash

# ===========================================
# Classification locale (LLM via Ollama)
# ===========================================
# Fonctionnalité séparée du chat : utilise Ollama pour classifier
# automatiquement les transactions en catégories.
# LLM_ENABLED=true  → classification auto des clusters sans k-NN
# LLM_UI_ENABLED=true → affiche le bouton « Interpréter (LLM) » dans l'UI
LLM_ENABLED=false
LLM_UI_ENABLED=false

# ===========================================
# Embeddings (classification locale)
# ===========================================
# Modèle de similarité sémantique — fonctionne sans GPU.
# Ne nécessite aucune clé API.
#EMBEDDING_MODEL_NAME=paraphrase-multilingual-MiniLM-L12-v2
#EMBEDDING_DIMENSIONS=384
#EMBEDDING_SIMILARITY_HIGH=0.85
#EMBEDDING_SIMILARITY_MEDIUM=0.70
#EMBEDDING_SIMILARITY_LOW=0.55
#EMBEDDING_CATEGORY_THRESHOLD=0.40
#EMBEDDING_CATEGORY_PREFER_THRESHOLD=0.62
#EMBEDDING_MIN_CLUSTER_SIZE=3
#EMBEDDING_CLUSTER_DISTANCE_THRESHOLD=0.5
# Mots-clés à renforcer dans les embeddings (ex: "LECLERC,AMAZON,CARREFOUR")
#EMBEDDING_BOOST_KEYWORDS=
#EMBEDDING_BOOST_REPEAT=2

# --- CORS ---
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# --- File Upload ---
MAX_UPLOAD_SIZE_MB=10
